

<div id="disqus_thread" class="container"></div>
<script type="text/javascript">
  (function () {
    var disqus_shortname = '{{ site.disqus_shortname }}'
    var el = document.getElementById('disqus_thread')

    window.addEventListener('scroll', checkPosition)
    window.addEventListener('load', checkPosition)

    function checkPosition () {
      var rect = el.getBoundingClientRect()
      if (rect.top < window.innerHeight) {
        window.removeEventListener('scroll', checkPosition)
        window.removeEventListener('load', checkPosition)
        loadDisqus()
      }
    }

    function loadDisqus () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }
  })()
</script>
